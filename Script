local player = game.Players.LocalPlayer
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

-- Configurações iniciais
local speedDefault = 100
local jumpDefault = 50

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "JPdosScriptsHub"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 280, 0, 300)
mainFrame.Position = UDim2.new(0.5, -140, 0.5, -150)
mainFrame.BackgroundColor3 = Color3.fromRGB(34, 40, 49)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true

local function createButton(text, posY)
	local btn = Instance.new("TextButton", mainFrame)
	btn.Size = UDim2.new(0, 260, 0, 40)
	btn.Position = UDim2.new(0, 10, 0, posY)
	btn.BackgroundColor3 = Color3.fromRGB(67, 75, 89)
	btn.TextColor3 = Color3.fromRGB(220, 220, 220)
	btn.Font = Enum.Font.GothamSemibold
	btn.TextSize = 20
	btn.Text = text
	btn.AutoButtonColor = true
	local corner = Instance.new("UICorner", btn)
	corner.CornerRadius = UDim.new(0, 10)
	local hover = Instance.new("UIStroke", btn)
	hover.Color = Color3.fromRGB(120, 170, 250)
	hover.Thickness = 1.5
	hover.Transparency = 1
	hover.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	hover.Name = "HoverStroke"
	btn.MouseEnter:Connect(function()
		hover.Transparency = 0
		btn.BackgroundColor3 = Color3.fromRGB(54, 63, 80)
	end)
	btn.MouseLeave:Connect(function()
		hover.Transparency = 1
		btn.BackgroundColor3 = Color3.fromRGB(67, 75, 89)
	end)
	return btn
end

local titleLabel = Instance.new("TextLabel", mainFrame)
titleLabel.Size = UDim2.new(1, -20, 0, 40)
titleLabel.Position = UDim2.new(0, 10, 0, 10)
titleLabel.BackgroundTransparency = 1
titleLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextScaled = true
titleLabel.Text = "JP dos ScriptsHub"
titleLabel.TextXAlignment = Enum.TextXAlignment.Left

local flyBtn = createButton("Fly: OFF", 60)
local speedBtn = createButton("Speed: "..speedDefault, 110)
local jumpBtn = createButton("Jump: "..jumpDefault, 160)
local noclipBtn = createButton("No Clip: OFF", 210)
local closeBtn = createButton("Close Hub", 260)

local openBtn = Instance.new("TextButton", screenGui)
openBtn.Size = UDim2.new(0, 130, 0, 40)
openBtn.Position = UDim2.new(0, 10, 0, 10)
openBtn.Text = "Open Hub"
openBtn.BackgroundColor3 = Color3.fromRGB(50, 150, 70)
openBtn.TextColor3 = Color3.fromRGB(240, 240, 240)
openBtn.Font = Enum.Font.GothamSemibold
openBtn.TextSize = 20
openBtn.Visible = false
local openCorner = Instance.new("UICorner", openBtn)
openCorner.CornerRadius = UDim.new(0, 12)

-- Variáveis de estado
local flying = false
local noclip = false
local speed = speedDefault
local jumpPower = jumpDefault
local flyConnection

-- Funções auxiliares
local function getCharacter()
	return player.Character or player.CharacterAdded:Wait()
end

local function getHumanoid()
	local char = getCharacter()
	return char and char:FindFirstChildOfClass("Humanoid")
end

local function getRootPart()
	local char = getCharacter()
	return char and char:FindFirstChild("HumanoidRootPart")
end

-- Fly start/stop
local function startFly()
	if flying then return end
	flying = true
	flyBtn.Text = "Fly: ON"
	local humanoid = getHumanoid()
	if humanoid then humanoid.PlatformStand = true end

	flyConnection = RunService.RenderStepped:Connect(function()
		local humanoid = getHumanoid()
		local rootPart = getRootPart()
		if not (humanoid and rootPart) then return end
		local camera = workspace.CurrentCamera
		local moveDir = humanoid.MoveDirection

		local flySpeed = speed
		local horizontalVel = Vector3.new(0, 0, 0)
		if moveDir.Magnitude > 0 then
			horizontalVel = camera.CFrame:VectorToWorldSpace(Vector3.new(moveDir.X, 0, moveDir.Z)).Unit * flySpeed
		end

		local verticalVel = 0
		-- No PC: espaço para subir, shift para descer
		-- No mobile: toque para subir (touch enabled)
		if UIS.TouchEnabled then
			-- Subir se tela tocada (simplificação)
			if UIS:IsTouching() then
				verticalVel = flySpeed
			end
		else
			if UIS:IsKeyDown(Enum.KeyCode.Space) then
				verticalVel = flySpeed
			elseif UIS:IsKeyDown(Enum.KeyCode.LeftShift) then
				verticalVel = -flySpeed
			end
		end

		rootPart.Velocity = Vector3.new(horizontalVel.X, verticalVel, horizontalVel.Z)
	end)
end

local function stopFly()
	if not flying then return end
	flying = false
	flyBtn.Text = "Fly: OFF"
	local humanoid = getHumanoid()
	if humanoid then humanoid.PlatformStand = false end
	if flyConnection then
		flyConnection:Disconnect()
		flyConnection = nil
	end
	local rootPart = getRootPart()
	if rootPart then
		rootPart.Velocity = Vector3.new(0, 0, 0)
	end
end

flyBtn.MouseButton1Click:Connect(function()
	if flying then
		stopFly()
	else
		startFly()
	end
end)

-- Speed botão
speedBtn.MouseButton1Click:Connect(function()
	speed = speed + 10
	if speed > 300 then speed = speedDefault end
	local humanoid = getHumanoid()
	if humanoid then
		humanoid.WalkSpeed = speed
	end
	speedBtn.Text = "Speed: "..speed
end)

-- Jump botão
jumpBtn.MouseButton1Click:Connect(function()
	local humanoid = getHumanoid()
	if humanoid then
		jumpPower = jumpPower + 10
		if jumpPower > 200 then
			jumpPower = jumpDefault
		end
		humanoid.JumpPower = jumpPower
		jumpBtn.Text = "Jump: "..jumpPower
	end
end)

-- NoClip toggle
noclipBtn.MouseButton1Click:Connect(function()
	noclip = not noclip
	noclipBtn.Text = noclip and "No Clip: ON" or "No Clip: OFF"
	local char = getCharacter()

	-- Manter colisão desligada enquanto NoClip ativo
	if noclip then
		RunService.Stepped:Connect(function()
			for _, part in pairs(char:GetChildren()) do
				if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
					part.CanCollide = false
				end
			end
		end)
	else
		for _, part in pairs(char:GetChildren()) do
			if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
				part.CanCollide = true
			end
		end
	end
end)

-- Close and Open Hub
closeBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = false
	openBtn.Visible = true
end)

openBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = true
	openBtn.Visible = false
end)

-- Inicializa velocidade e pulo padrão
local humanoid = getHumanoid()
if humanoid then
	humanoid.WalkSpeed = speedDefault
	humanoid.JumpPower = jumpDefault
end
